title: Caddy
date: 2022-09-07 10:13:09
uuid: a96a8212-46be-4d5b-b6f5-f8affd8bbe4b
tgid: 187
tags: channel
----

<p>–Ø –∑–∞ –≤–µ–±—Å–µ—Ä–≤–µ—Ä –¥–ª—è —Å–≤–æ—ó—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –ø–æ—Ç—Ä–µ–± –º–∞—é Caddy. –ú–æ—ó –¥—Ä—É–∑—ñ, —è–∫—ñ –≤ –∫—É—Ä—Å—ñ (—Ç–æ–±—Ç–æ –î—ñ–º–∞) –ø—Ä–æ–∑—Ä—ñ–≤–∞—é—Ç—å –∑ —Ç–æ–≥–æ, –∞–ª–µ —è nginx –ø–æ—á–∞–≤ —é–∑–∞—Ç–∏ —É 2005-–º—É, –∫–æ–ª–∏ –π–æ–º—É —â–µ —Ä–æ–∫—É –Ω–µ –±—É–ª–æ, –±–æ —è –¥—É–∂–µ –ª—é–±–ª—é –≥–æ—Å—Ç—Ä—ñ –≤—ñ–¥—á—É—Ç—Ç—è. üå∂Ô∏è –ù—É –π –≤–æ–Ω–æ –≤–∏–ø—Ä–∞–≤–¥–∞–ª–æ —Å–µ–±–µ, –ø—Ä–∞–≤–¥–∞? –Ø –ø–æ—Ç—ñ–º —Ä–æ–∫—ñ–≤ 5 –π–æ–≥–æ –≤–ø—Ä–æ–≤–∞–¥–∂—É–≤–∞–≤ –º–∞–π–∂–µ –≤—Å—é–¥–∏ –∑–∞–º—ñ—Å—Ç—å –∞–ø–∞—á–∞ (–ø–æ—Ç—ñ–º –≤–æ–Ω–æ —ñ —Ç–∞–∫ –≤–∂–µ –≤—Å—é–¥–∏ –±—É–ª–æ).</p>

<p>–¢–∞–∫ –æ—Ç, –∫–∞–¥–¥—ñ –ø–æ–¥–æ–±–∞—î—Ç—å—Å—è. –í—ñ–Ω, –≤–æ—á–µ–≤–∏–¥—å, –Ω–µ –±—É–¥–µ nginx&#39;–æ–º –ø–æ —à–≤–∏–¥–∫–æ—Å—Ç—ñ, —è–∫ –º—ñ–Ω—ñ–º—É–º, –±–æ –Ω–∞–ø–∏—Å–∞–Ω–∏–π –Ω–∞ Go ‚Äî –º–æ–≤—ñ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –∑–±–∏—Ä–∞–Ω–Ω—è–º —Å–º—ñ—Ç—Ç—è ‚Äî –∞–ª–µ —Ç—ñ % –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –º–µ–Ω–µ –∞–∂ –Ω—ñ—è–∫ –Ω–µ —á—ñ–ø–ª—è—é—Ç—å. –ê –∑–∞—Ç–µ —â–æ —á—ñ–ø–ª—è—î –¥—É–∂–µ, —Ç–∞–∫ —Ü–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π HTTPS. –ù—É –ø—Ä–æ—Å—Ç–æ –∫–∞–π—Ñ, –Ω—ñ—á–æ–≥–æ –≤–∑–∞–≥–∞–ª—ñ —Ä–æ–±–∏—Ç–∏ –Ω–µ —Ç—Ä–µ–±–∞, –ø—Ä–æ–ø–∏—Å–∞–≤ –Ω–æ–≤–∏–π –¥–æ–º–µ–Ω —ñ –≤—Å–µ –ø–æ—ó—Ö–∞–ª–æ. –û–¥–Ω–æ–∑–Ω–∞—á–Ω–µ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è.</p>

<p>–ê –≤—á–æ—Ä–∞ —è –Ω–∞—Ç—Ä–∞–ø–∏–≤ –Ω–∞ <a href="https://til.simonwillison.net/caddy/pause-retry-traffic">–ø–æ—Å—Ç –°–∞–π–º–æ–Ω–∞ –£—ñ–ª–ª—ñ—Å–æ–Ω–∞</a> –ø—Ä–æ –ø–∞—É–∑—É —Ç—Ä–∞—Ñ—ñ–∫—É —ñ —Ü–µ –≤–∑–∞–≥–∞–ª—ñ –∫–∞–π—Ñ. –Ø —Ö–æ—Ç—ñ–≤ —Ç–∞–∫–µ —É nginx&#39;—ñ, –∞–ª–µ –Ω–∞—Ç—ñ–≤–Ω–æ –≤–æ–Ω–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–º—ñ—î, –∞ —É –°–∞–π–º–æ–Ω–∞ —Ç–∞–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≥–æ—Ç–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è –≤—ñ–¥ –ë–µ–π–∑–∫–µ–º–ø—É –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞—Ö –Ω–∞ –õ—É–∞. –ù–µ —Ö–æ—á—É —Å–∫—Ä–∏–ø—Ç–∏ –Ω–∞ –õ—É–∞. :( –ê –ø–æ–ø–µ—Ä–µ–¥–Ω—î —Ä—ñ—à–µ–Ω–Ω—è, —è–∫–µ –≤—ñ–Ω –∑–≥–∞–¥—É—î, –≤—ñ–¥ Braintree, –≤–∑–∞–≥–∞–ª—ñ –Ω–∞ Python/Tornado. –ö–∞–ø–µ—Ü—å, –Ω–∞–≤—ñ—Ç—å –¥–∏–≤–Ω–æ, —á–æ–º—É –Ω—ñ—á–æ–≥–æ —â–µ –Ω–µ–º–∞ –≥–æ—Ç–æ–≤–æ–≥–æ.</p>

<p>–Ü—Å—Ç–æ—Ä—ñ—è —Ç–∞–∫–∞: –≤ –º–µ–Ω–µ —î —è–∫–∏–π—Å—å –Ω–µ–≤–µ–ª–∏—á–∫–∏–π –ø—Ä–æ—î–∫—Ç, —Å–∫–∞–∂—ñ–º–æ <a href="https://paste.in.ua">paste.in.ua</a>, —ñ –∑–∞ –Ω–∏–º –∑–∞–ø—É—â–µ–Ω–∏–π –≤—Å—å–æ–≥–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å. –¶–µ –≤—Å–µ —á–µ—Ä–µ–∑ –µ–∫–æ–Ω–æ–º—ñ—é, –Ω–µ —Ö–æ—á—É —è, —â–æ–± –≤–æ–Ω–æ –ø–∞–º&#39;—è—Ç—å –¥–≤–∞ —Ä–∞–∑–∏ –∂–µ—Ä–ª–æ, —ñ –æ–¥–∏–Ω –Ω–æ—Ä–º–∞–ª—å–Ω–æ —Å–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è ‚Äî –æ–∫—Ä—ñ–º –≤–∏–ø–∞–¥–∫—ñ–≤, –∫–æ–ª–∏ —è –∑—Ä–æ–±–∏–≤ –Ω–æ–≤–∏–π —Ä–µ–ª—ñ–∑. –£ —Ü–µ–π –º–æ–º–µ–Ω—Ç —è —Å—Ç–∞—Ä–∏–π —Å–µ—Ä–≤—ñ—Å –≤–∏–º–∏–∫–∞—é, –∞ –Ω–æ–≤–∏–π –∑–∞–ø—É—Å–∫–∞—é ‚Äî —ñ —Ü–µ —É –∫–ª–æ–∂—ñ –ø—Ä—è–º–æ –∑–∞–π–º–∞—î —è–∫–∏–π—Å—å —á–∞—Å (–¥–æ–±—Ä–µ —Ö–æ—á –Ω–µ –≥–æ–¥–∏–Ω—É –≥–≥–≥).</p>

<p>–¢–∞–∫ –æ—Ç, —Ü—ñ –∫—ñ–ª—å–∫–∞ —Å–µ–∫—É–Ω–¥ —Å–µ—Ä–≤—ñ—Å—É –Ω–µ–º–∞ —ñ nginx —É —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –∫–∞–∂–µ 503 Service Unavailable. –Ü –∫–∞–¥–¥—ñ –∫–∞–∂–µ —â–æ—Å—å —Å—Ö–æ–∂–µ, –∞–ª–µ –º–æ–∂–Ω–∞ –π–æ–º—É —Å–∫–∞–∑–∞—Ç–∏ –æ—Ç–∞–∫–µ:</p>

<pre><code>reverse_proxy localhost:5001 {
    lb_try_duration 10s
    lb_try_interval 1s
}
</code></pre>

<p>–Ü —Ç–æ–¥—ñ –≤—ñ–Ω 10 —Å–µ–∫—É–Ω–¥ –±—É–¥–µ —Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Ç–∏ —Ç–∞ —á–µ—Å–Ω–æ —Ç–∏–∫–∞—Ç–∏—Å—è –≤ –±–µ–∫–µ–Ω–¥. –ê –∑–∞ 10 —Å–µ–∫—É–Ω–¥ —Ç–æ–π –≤—Å—Ç–∏–≥–∞—î –∑–∞–ø—É—Å—Ç–∏—Ç–∏—Å—è —ñ —Ç–æ–º—É –≤–∏–≥–ª—è–¥–∞—î –≤—Å–µ –Ω–∞—á–µ —Å–∞–π—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—ñ–ª—å–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤–∞–≤—Å—è. –ö–∞–π—Ñ.</p>